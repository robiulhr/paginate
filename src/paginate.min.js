/*
 * A open source pagination plugin using pure Javascript.
 * v1.0.0
 *
 * @copyright	Copyright (c) 2023 Robiul H.
 * @license	MIT License; see LICENSE.txt
*/ 
class Paginate{constructor(){this.defaults={itemsContainerClass:".items_container",paginationContainerClass:".pagination_container",itemsView:"row_view",wrapAround:!0,showPrevNext:!0,showFirstLast:!0,defaultClass:"defaultclass",firstAreaLabel:"First",prevAreaLabel:"Prev",nextAreaLabel:"Next",lastAreaLabel:"Last",pageLinkAreaLabel:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],hasEllips:!0,paginationOrder:["first","prev","num","next","last"],paginationSelector:".pagination",startpageNum:0,visiblePageCount:4,activeClass:"active",disabledClass:"disabled",onLinkClick:function(e){},onFirstClick:function(e){},onLastClick:function(e){},onPrevClick:function(e){},onNextClick:function(e){},onMoreClick:function(e){},onLessClick:function(e){}},this._currentPage=this.defaults.startpageNum}get getCurrentPage(){return this._currentPage}set setCurrentPage(e){return this._currentPage=e}_optionsHandler(e){if("object"!=typeof e||Array.isArray(e)||null===e){if(void 0===e)console.group("%c Suggestion for Paginate javascript Library","color: black; background-color: #D6995B;padding: 5px;font-size:20px"),console.log("%c It Seems like you haven't provided the options object. \n If you want to change the default settings Please provide a Option object providing your disire settings on it as properties. \n Like below:\n var example_1 = new Paginate({\n containerSelector: '.example_1 .items', \n itemSelector: '.example_1 .items > div', \n navigationSelector: '.example_1 .page_navigation', \n itemsPerPage: 3 \n })","padding:10px"),console.groupEnd();else throw Error("Your provided value as Option must be an Object.")}else Object.assign(this.defaults,e)}_isValidElementSelector(e){try{document.createDocumentFragment().querySelector(e)}catch{return!1}return!0}_selectArrayofElement(e){if(this._isValidElementSelector(e)){if(0!=document.querySelectorAll(e).length)return document.querySelectorAll(e);throw Error(`Your site doesn't contain any '${e}' selector. Please provide a valid selector.`)}throw Error(`'${e}' is not a valid css selector Please provide a valid one.`)}_selectSingleElement(e){if(this._isValidElementSelector(e)){if(document.querySelector(e))return document.querySelector(e);throw Error(`Your site doesn't contain any '${e}' selector. Please provide a valid selector.`)}throw Error(`'${e}' is not a valid css selector Please provide a valid one.`)}_checkElementOverflows(e){return e.classList.contains("row_view")?e.offsetWidth<e.scrollWidth:e.classList.contains("column_view")?e.offsetHeight<e.scrollHeight:void 0}_pageItemsHorizontalScrollEventCallback(e){e.target.parentElement.scrollLeft+=3*e.deltaY}_pageItemsHorizontalScroll(e){e.classList.contains("row_view")&&e.addEventListener("wheel",this._pageItemsHorizontalScrollEventCallback,{passive:!0})}_removePageItemsHorizontalScroll(e){e.classList.contains("row_view")&&e.removeEventListener("wheel",this._pageItemsHorizontalScrollEventCallback)}_pageItemsTouchScroll(e){let t={startClintX:0,startClintY:0};this._mouseDownHandler=function(s){s.preventDefault(),t={startClintX:s.clientX,startClintY:s.clientY},e.addEventListener("mousemove",a),e.addEventListener("mouseup",i)};let a=function(a){a.preventDefault(),e.style.cursor="grabbing",e.style.userSelect="none";let i=a.clientX-t.startClintX,s=a.clientY-t.startClintY;e.classList.contains("column_view")&&(e.scrollTop-=3*s),e.classList.contains("row_view")&&(e.scrollLeft-=3*i)},i=function(t){t.preventDefault(),e.removeEventListener("mousemove",a),e.removeEventListener("mouseup",i),e.style.cursor="grab",e.style.removeProperty("user-select")};e.addEventListener("mousedown",this._mouseDownHandler)}_removePageItemsTouchScrollEvent(e){e.removeEventListener("mousedown",this._mouseDownHandler)}_handlePageScrollandTouchScrollDependingOverflows(e){this._checkElementOverflows(e)?(e.style.justifyContent="flex-start",this._pageItemsHorizontalScroll(e),this._pageItemsTouchScroll(e)):(e.style.justifyContent="center",this._removePageItemsHorizontalScroll(e),this._removePageItemsTouchScrollEvent(e))}_createPagination(){let e='<div class="paginate_wrapper">';e+=`<div class="items_container ${this.defaults.itemsView}"> </div>`;let t=this.defaults.hasEllips?'<li class="pagination_item ellipse more"><span>...</span></li>':"",a=this.defaults.hasEllips?'<li class="pagination_item ellipse less"><span>...</span></li>':"",i=this.defaults.showFirstLast?`<li class="pagination_item paginaiton_first ${this.defaults.defaultClass}"><a href="" aria-label="${this.defaults.firstAreaLabel}" onclick="return false;">${this.defaults.firstAreaLabel}</a></li>`:"",s=this.defaults.showFirstLast?`<li class="pagination_item paginaiton_last ${this.defaults.defaultClass}"><a href="" aria-label="${this.defaults.lastAreaLabel}" onclick="return false;">${this.defaults.lastAreaLabel}</a></li>`:"",n=this.defaults.showPrevNext?`<li class="pagination_item paginaiton_prev ${this.defaults.defaultClass}"><a href="" aria-label="${this.defaults.prevAreaLabel}" onclick="return false;">${this.defaults.prevAreaLabel}</a></li>`:"",l=this.defaults.showPrevNext?`<li class="pagination_item paginaiton_next ${this.defaults.defaultClass}"><a href="" aria-label="${this.defaults.nextAreaLabel}" onclick="return false;">${this.defaults.nextAreaLabel}</a></li>`:"",o=' <div id="pagination_container"><ul class="pagination_wrapper">';return this.defaults.paginationOrder.forEach(function(e){switch(e){case"first":o+=i;break;case"prev":o+=n;break;case"next":o+=l;break;case"last":o+=s;break;case"num":this.defaults.hasEllips&&(o+=a);let r=0;for(;r<=this.pageCount-1;){let c="";switch(r){case 0:c="first_num_link";break;case this.pageCount-1:c="last_num_link"}o+=`<li class="pagination_item ${this.defaults.defaultClass} data-item ${c}" aria-label="${r}"><a href="#" onclick="return false">${Array.isArray(this.defaults.pageLinkAreaLabel)&&this.defaults.pageLinkAreaLabel[r]||r+1}</a></li>`,r++}this.defaults.hasEllips&&(o+=t)}},this),e+(o+"</ul></div>")+"</div>"}_hideAllShowSpecificPaginationItems(e){e.forEach(function(e,t){t<this.defaults.startpageNum||t>this.defaults.startpageNum+(this.defaults.visiblePageCount-1)?e.style.display="none":e.style.display="list-item"},this)}_makePaginationBtnDisable(){this._currentPage<=this.defaults.visiblePageCount-1?this._selectSingleElement(".paginate_wrapper .pagination_item.ellipse.less").style.display="none":this._selectSingleElement(".paginate_wrapper .pagination_item.ellipse.less").style.display="list-item",this._currentPage>=this.pageCount-1-this.defaults.visiblePageCount?this._selectSingleElement(".paginate_wrapper .pagination_item.ellipse.more").style.display="none":this._selectSingleElement(".paginate_wrapper .pagination_item.ellipse.more").style.display="list-item",this.defaults.wrapAround||(this._currentPage<=0?(this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_prev").style.display="none",this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_first").style.display="none"):(this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_prev").style.display="list-item",this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_first").style.display="list-item"),this._currentPage>=this.pageCount-1?(this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_next").style.display="none",this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_last").style.display="none"):(this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_next").style.display="list-item",this._selectSingleElement(".paginate_wrapper .pagination_item.paginaiton_last").style.display="list-item"))}_setActiveLink(e){e.forEach(function(e,t){this._currentPage==t?e.classList.add(this.defaults.activeClass):e.classList.remove(this.defaults.activeClass)},this)}_firstClickHandler(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.paginaiton_first"),i=this;a.addEventListener("click",function(a){i.defaults.onFirstClick.call(i,a),i._currentPage=0,0!=i.defaults.startpageNum&&(i.defaults.startpageNum=0,i._hideAllShowSpecificPaginationItems(e)),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()})}_prevClickHandler(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.paginaiton_prev"),i=this;a.addEventListener("click",function(a){i.defaults.onPrevClick.call(i,a),i._currentPage<i.pageCount&&i._currentPage>=1?(i._currentPage--,i._currentPage<i.defaults.startpageNum&&(i.defaults.startpageNum--,i._hideAllShowSpecificPaginationItems(e)),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()):i._currentPage<=0&&i.defaults.wrapAround&&(i.defaults.startpageNum=i.pageCount-i.defaults.visiblePageCount,i._hideAllShowSpecificPaginationItems(e),i._currentPage=i.pageCount-1,i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable())})}_ellipseMoreClickHandler(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.ellipse.more"),i=this;a.addEventListener("click",function(a){i.defaults.onMoreClick.call(i,a),i.defaults.startpageNum+i.defaults.visiblePageCount>i.pageCount-1-i.defaults.visiblePageCount?i.defaults.startpageNum+=(i.pageCount-1)%i.defaults.visiblePageCount-1:i.defaults.startpageNum+=i.defaults.visiblePageCount,i._currentPage+i.defaults.visiblePageCount>i.pageCount-1?i._currentPage+=(i.pageCount-1)%i.defaults.visiblePageCount-1:i._currentPage+=i.defaults.visiblePageCount,i._hideAllShowSpecificPaginationItems(e),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()})}_ellipseLessClickHandler(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.ellipse.less"),i=this;a.addEventListener("click",function(a){i.defaults.onLessClick.call(i,a),i.defaults.startpageNum<i.defaults.visiblePageCount?i.defaults.startpageNum-=i.defaults.startpageNum%i.defaults.visiblePageCount:i.defaults.startpageNum-=i.defaults.visiblePageCount,i._currentPage<i.defaults.visiblePageCount?i._currentPage-=i._currentPage%i.defaults.visiblePageCount-1:i._currentPage-=i.defaults.visiblePageCount,i._hideAllShowSpecificPaginationItems(e),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()})}_numElemClickHandler(e,t){e.forEach((a,i)=>{let s=this;a.addEventListener("click",function(a){s.defaults.onLinkClick.call(s,a),s._currentPage=i,s._createRenderPageItems(t,s._currentPage),s._setActiveLink(e),s._makePaginationBtnDisable()})},this)}_nextClickHander(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.paginaiton_next"),i=this;a.addEventListener("click",function(a){i.defaults.onNextClick.call(i,a),i._currentPage<i.pageCount-1&&i._currentPage>=0?(i._currentPage++,i._currentPage>=i.defaults.startpageNum+i.defaults.visiblePageCount&&(i.defaults.startpageNum++,i._hideAllShowSpecificPaginationItems(e)),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()):i._currentPage>=i.pageCount-1&&i.defaults.wrapAround&&(i.defaults.startpageNum=0,i._hideAllShowSpecificPaginationItems(e),i._currentPage=0,i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable())})}_lastClickHandler(e,t){let a=this._selectSingleElement(".pagination_wrapper .pagination_item.paginaiton_last"),i=this;a.addEventListener("click",function(a){i.defaults.onLastClick.call(i,a),i._currentPage=i.pageCount-1,i.defaults.startpageNum!=i.pageCount-i.defaults.visiblePageCount&&(i.defaults.startpageNum=i.pageCount-i.defaults.visiblePageCount,i._hideAllShowSpecificPaginationItems(e)),i._createRenderPageItems(t,i._currentPage),i._setActiveLink(e),i._makePaginationBtnDisable()})}}class ProPaginate extends Paginate{#a=[{month:"jan",data:[{_date:"Jan 20",location:"Chattagram"},]},{month:"feb",data:[{_date:"feb 20",location:"Chattagram"},]},{month:"march",data:[{_date:"march 12",location:"Dhaka"},]},{month:"apr",data:[{_date:"apr 12",location:"Dhaka"},{_date:"apr 32",location:"Dhaka"},]},{month:"may",data:[{_date:"may 5",location:"Dhaka"},{_date:"may 25",location:"Dhaka"},]},{month:"jun",data:[{_date:"jun 4",location:"Dhaka"},{_date:"jun 24",location:"Dhaka"},]},{month:"jul",data:[{_date:"jul 5",location:"Dhaka"},{_date:"jul 3",location:"Dhaka"},{_date:"jul 25",location:"Dhaka"},]},{month:"aug",data:[{_date:"aug 4",location:"Dhaka"},{_date:"aug 3",location:"Dhaka"},{_date:"aug 11",location:"Dhaka"},{_date:"aug 13",location:"Dhaka"},]},{month:"sep",data:[{_date:"sep 3",location:"Dhaka"},{_date:"sep 2",location:"Dhaka"},{_date:"sep 6",location:"Dhaka"},{_date:"sep 6",location:"Dhaka"},{_date:"sep 5",location:"Dhaka"},]},{month:"oct",data:[{_date:"oct 3",location:"Dhaka"},{_date:"oct 23",location:"Dhaka"},{_date:"oct 13",location:"Dhaka"},{_date:"oct 23",location:"Dhaka"},{_date:"oct 3",location:"Dhaka"},{_date:"oct 13",location:"Dhaka"},]},{month:"nov",data:[{_date:"nov 2",location:"Dhaka"},{_date:"nov 2",location:"Dhaka"},{_date:"nov 22",location:"Dhaka"},{_date:"nov 2",location:"Dhaka"},{_date:"nov 22",location:"Dhaka"},{_date:"nov 22",location:"Dhaka"},{_date:"nov 2",location:"Dhaka"},{_date:"nov 22",location:"Dhaka"},{_date:"nov 2",location:"Dhaka"},]},{month:"dec",data:[{_date:"dec 5",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 16",location:"Dhaka"},{_date:"dec 5",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 16",location:"Dhaka"},{_date:"dec 5",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 5",location:"Dhaka"},{_date:"dec 16",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 16",location:"Dhaka"},{_date:"dec 16",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 5",location:"Dhaka"},{_date:"dec 15",location:"Dhaka"},{_date:"dec 5",location:"Dhaka"},]},];constructor(e){super(),this.defaults=Object.assign(this.defaults,{mainContainerSelector:"#paginate",data:this.#a,dataItemsArrayPath:"data",dataItemHtml:'<div class="data_item"><div class="data_item_details"><span class="data_item_date">${_date}</span><span class="data_item_location">${location}</span></div></div>',showAlldataOnce:!1,visibleDataonce:5,showMoreAreaLabel:"Show More",showMoreClass:"show_more",onShowMoreClick:function(){}}),this._optionsHandler(e),this.setCurrentPage=this.defaults.startpageNum,this._init()}_init(){this.mainContainer=this._selectArrayofElement(this.defaults.mainContainerSelector),this._isDataValid()&&this.mainContainer.forEach(function(e){this.pageCount=this.defaults.data.length;let t=this._createPagination(this.pageCount);e.innerHTML=t;let a=this._selectArrayofElement("#pagination_container .data-item");this._hideAllShowSpecificPaginationItems(a),this._setActiveLink(a),this._makePaginationBtnDisable();let i=this._selectSingleElement(".paginate_wrapper .items_container");this._createRenderPageItems(i,this._currentPage),this._numElemClickHandler(a,i),this._firstClickHandler(a,i),this._prevClickHandler(a,i),this._nextClickHander(a,i),this._lastClickHandler(a,i),this._ellipseMoreClickHandler(a,i),this._ellipseLessClickHandler(a,i)},this)}_stringToTamplateGet(e,t,a=`$\{${e}}`){return e.split(".").reduce((e,t)=>e[t]||a,t)}_stringToTamplateParser(e,t,a){return e.replace(/\$\{.+?}/g,e=>{let i=e.substr(2,e.length-3).trim();return this._stringToTamplateGet(i,t,a)})}_isDataValid(){if(Array.isArray(this.defaults.data)){if(0!=this.defaults.data.length)return!0;throw Error("please provide some data.")}throw Error("your data should be an array.")}_createRenderPageItems(e,t){let a=this.defaults.data[t][this.defaults.dataItemsArrayPath],i=this.defaults.showAlldataOnce?a.length:Math.min(this.defaults.visibleDataonce,a.length),s="";for(let n=0;n<i;n++){let l=this._stringToTamplateParser(this.defaults.dataItemHtml,a[n]);s+=l}if(e.innerHTML=s,this._handlePageScrollandTouchScrollDependingOverflows(e),a.length>this.defaults.visibleDataonce){if(!this.isShowMoreSectionExist){this._createRenderShowMore(e);let o=this._selectSingleElement(".paginate_wrapper .show_more_btn");o.addEventListener("click",this._showMoreClickEventCallback.bind(this))}}else if(this.isShowMoreSectionExist){let r=this._selectSingleElement(".paginate_wrapper .show_more_btn");r.removeEventListener("click",this._showMoreClickEventCallback.bind(this)),r.remove(),this.isShowMoreSectionExist=!1}}_createRenderShowMore(e){let t=`<div class="show_more_btn ${this.defaults.showMoreClass} hidden"><span>${this.defaults.showMoreAreaLabel}</span></div>`;this.defaults.showAlldataOnce||e.insertAdjacentHTML("afterend",t),this.isShowMoreSectionExist=!0,this._showHideShowMore(e)}_showHideShowMoreScrollEventCallback(e){if(this.isShowMoreSectionExist){let t=this._selectSingleElement(".paginate_wrapper .show_more_btn");e.target.classList.contains("column_view")?e.target.scrollHeight-20<=e.target.scrollTop+e.target.clientHeight?t.classList.remove("hidden"):t.classList.add("hidden"):e.target.classList.contains("row_view")&&(e.target.scrollWidth-20<=e.target.scrollLeft+e.target.clientWidth?t.classList.remove("hidden"):t.classList.add("hidden"))}}_showHideShowMore(e){if(this._checkElementOverflows(e))e.addEventListener("scroll",this._showHideShowMoreScrollEventCallback.bind(this));else if(this.isShowMoreSectionExist){let t=this._selectSingleElement(".paginate_wrapper .show_more_btn");t.classList.contains("hidden")&&t.classList.remove("hidden")}}_addMorePageItems(e){let t=this._selectSingleElement(".paginate_wrapper .items_container"),a=t.querySelectorAll("div.data_item").length,i=this.defaults.data[this._currentPage][this.defaults.dataItemsArrayPath],s=i.length-a<e?i.length-1:a-1+e;for(let n=a-1;n<s;n++){let l=this._stringToTamplateParser(this.defaults.dataItemHtml,i[n]);t.insertAdjacentHTML("beforeend",l)}t.querySelectorAll("div.data_item").length>=i.length&&this.isShowMoreSectionExist?(this._selectSingleElement(".paginate_wrapper .show_more_btn").remove(),this.isShowMoreSectionExist=!1):this._selectSingleElement(".paginate_wrapper .show_more_btn").classList.add("hidden"),this._handlePageScrollandTouchScrollDependingOverflows(t)}_showMoreClickEventCallback(e){this.defaults.visibleDataonce<5&&this.defaults.visibleDataonce>0?this._addMorePageItems(this.defaults.visibleDataonce):this.defaults.visibleDataonce>=5&&this._addMorePageItems(Math.round(this.defaults.visibleDataonce/2))}}